{#for s in songs}
<tr data-song-id="{s.id}" class="{#if currentSong != null && s.id == currentSong.id}has-background-grey-dark has-text-white{/if}">
    <!-- Artwork -->
    <td class="has-text-centered" style="width: 5%;">
        <figure class="image is-48x48 is-inline-block">
            <img src="{artworkUrl.apply(s.artworkBase64)}" loading="lazy" alt="Artwork">
        </figure>
    </td>

    <!-- Title -->
    <td>
        <div class="has-text-white has-text-weight-semibold">{s.title ?: "Unknown Title"}</div>
    </td>

    <!-- Artist -->
    <td>
        <div class="has-text-success is-size-7">{s.artist ?: "Unknown Artist"}</div>
    </td>

    <!-- Date -->
    <td class="has-text-centered is-centered is-vcentered has-text-white has-text-weight-semibold">{formatDate.apply(s.dateAdded)}</td>

    <!-- Duration -->
    <td class="has-text-centered is-centered is-vcentered has-text-white has-text-weight-semibold">{formatDuration.apply(s.durationSeconds)}</td>

    <!-- Play button -->
    <td class="has-text-centered is-centered is-vcentered">
        <div class="buttons is-small is-grouped is-centered is-vcentered">
            <button
                        class="has-text-success"
                        hx-post="/api/music/playback/select/{profileId}/{s.id}"
                        hx-trigger="click"
                        hx-swap="none"
                        data-playlist-id="{playlistId}">
                        <i class="pi pi-play"></i>
                    </button>
            {#if playlistId == 0}
            <button
                        class="has-text-info"
                        hx-get="/api/music/ui/add-to-playlist-dialog/{profileId}/{s.id}"
                        hx-target="#addToPlaylistModalContent"
                        hx-swap="innerHTML"
                        hx-on::after-request="document.getElementById('addToPlaylistModal').classList.add('is-active')">
                        <i class="pi pi-plus"></i>
                    </button>
            {/if}
        </div>
    </td>
</tr>
{/for}

{#if totalPages > 1}
<tr>
    <td colspan="6">
        <nav class="pagination is-centered py-4" role="navigation" aria-label="pagination">
            <a class="pagination-previous"
               {#if currentPage > 1}
                                                 hx-get="/api/music/ui/tbody/{profileId}/{playlistId}?page={currentPage - 1}&limit={limit}{#if search}&search={search}{/if}{#if sortBy}&sortBy={sortBy}{/if}{#if sortDirection}&sortDirection={sortDirection}{/if}"
                                                 hx-target="#songTableBody"
                                                 hx-swap="innerHTML"
               {#else}
                   disabled
               {/if}>
                Previous
            </a>
            <a class="pagination-next"
               {#if currentPage < totalPages}
                   hx-get="/api/music/ui/tbody/{profileId}/{playlistId}?page={currentPage + 1}&limit={limit}{#if search}&search={search}{/if}{#if sortBy}&sortBy={sortBy}{/if}{#if sortDirection}&sortDirection={sortDirection}{/if}"
                   hx-target="#songTableBody"
                   hx-swap="innerHTML"
               {#else}
                   disabled
               {/if}>
                Next
            </a>
            <ul class="pagination-list">
                {#for p in pageNumbers}
                    {#if p == -1}
                        <li><span class="pagination-ellipsis">&hellip;</span></li>
                    {#else if p == currentPage}
                        <li><a class="pagination-link is-current" aria-label="Page {p}" aria-current="page">{p}</a></li>
                    {#else}
                        <li>
                            <a class="pagination-link"
                               aria-label="Goto page {p}"
                               hx-get="/api/music/ui/tbody/{profileId}/{playlistId}?page={p}&limit={limit}{#if search}&search={search}{/if}{#if sortBy}&sortBy={sortBy}{/if}{#if sortDirection}&sortDirection={sortDirection}{/if}"
                               hx-target="#songTableBody"
                               hx-swap="innerHTML">
                                {p}
                            </a>
                        </li>
                    {/if}
                {/for}
            </ul>
        </nav>
    </td>
</tr>
{/if}