<!DOCTYPE html>
<html lang="en" x-data="{ totalSteps: 4, get currentStep() { return $store.setup.currentStep || 1; } }">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>JMedia - Setup Wizard</title>
        <link rel="stylesheet" href="/css/bulma.min.css">
        <link rel="stylesheet" href="https://unpkg.com/primeicons@7.0.0/primeicons.css">
        <link rel="stylesheet" href="/css/custom.css">
        <script defer src="/js/htmx.min.js"></script>
        <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
        <!-- Font Awesome removed - using PrimeIcons instead -->
        <style>
            /* Glassmorphism base styles */
            body {
                background:
                    linear-gradient(135deg, rgba(219, 234, 254, 0.3) 0%, rgba(96, 165, 250, 0.3) 50%, rgba(30, 64, 175, 0.3) 100%),
                    url('https://images.unsplash.com/photo-1453280339213-efb07f95531b?w=1920&h=1080&fit=crop');
                background-size: cover;
                background-position: center;
                background-repeat: no-repeat;
                background-attachment: fixed;
                background-blend-mode: overlay;
                min-height: 100vh;
                position: relative;
                overflow-x: hidden;
            }

            body::before {
                content: '';
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background:
                    radial-gradient(circle at 20% 80%, rgba(251, 191, 36, 0.3) 0%, transparent 50%),
                    radial-gradient(circle at 80% 20%, rgba(147, 51, 234, 0.3) 0%, transparent 50%),
                    radial-gradient(circle at 40% 40%, rgba(236, 72, 153, 0.2) 0%, transparent 50%);
                pointer-events: none;
                z-index: -1;
            }

            body::before {
                content: '';
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background:
                    radial-gradient(circle at 20% 80%, rgba(251, 191, 36, 0.3) 0%, transparent 50%),
                    radial-gradient(circle at 80% 20%, rgba(147, 51, 234, 0.3) 0%, transparent 50%),
                    radial-gradient(circle at 40% 40%, rgba(236, 72, 153, 0.2) 0%, transparent 50%);
                pointer-events: none;
                z-index: -1;
            }

            [data-theme="dark"] {
                background:
                    linear-gradient(135deg, rgba(30, 58, 138, 0.6) 0%, rgba(30, 64, 175, 0.6) 50%, rgba(49, 46, 129, 0.6) 100%),
                    url('https://images.unsplash.com/photo-1453280339213-efb07f95531b?w=1920&h=1080&fit=crop') center/cover;
                background-blend-mode: overlay;
            }

            [data-theme="dark"]::before {
                background:
                    radial-gradient(circle at 20% 80%, rgba(251, 191, 36, 0.2) 0%, transparent 50%),
                    radial-gradient(circle at 80% 20%, rgba(147, 51, 234, 0.2) 0%, transparent 50%),
                    radial-gradient(circle at 40% 40%, rgba(236, 72, 153, 0.1) 0%, transparent 50%);
            }

            .step-content {
                display: none;
                opacity: 0;
                transform: translateX(100%);
                transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
                background: transparent !important;
                border: none !important;
                box-shadow: none !important;
                outline: none !important;
            }
            .step-content.active {
                display: block;
            }

            /* Slide transitions */
            .step-content:nth-child(1) {
                transition: all 0.5s ease-out;
            }
            .step-content:nth-child(2) {
                transition: all 0.5s ease-in;
            }
            .step-content:nth-child(3) {
                transition: all 0.5s ease-in;
            }
            .step-content:nth-child(4) {
                transition: all 0.5s ease-in;
            }

            .setup-container {
                max-width: 900px;
                margin: 0 auto;
                padding: 2rem;
                position: relative;
                z-index: 1;
            }

            .glass-box {
                background: rgba(255, 255, 255, 0.25) !important;
                backdrop-filter: blur(8px);
                -webkit-backdrop-filter: blur(8px);
                border-radius: 20px;
                border: 1px solid rgba(255, 255, 255, 0.3) !important;
                box-shadow:
                    0 8px 32px rgba(0, 0, 0, 0.1),
                    inset 0 1px 0 rgba(255, 255, 255, 0.4) !important;
                color: #333 !important;
                position: relative;
                overflow: hidden;
            }

            [data-theme="dark"] .glass-box {
                background: rgba(0, 0, 0, 0.4) !important;
                border: 1px solid rgba(255, 255, 255, 0.2) !important;
                color: #fff !important;
                box-shadow:
                    0 8px 32px rgba(0, 0, 0, 0.3),
                    inset 0 1px 0 rgba(255, 255, 255, 0.2) !important;
            }

            .glass-box::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent);
                transition: left 0.8s ease;
            }

            .glass-box:hover::before {
                left: 100%;
            }

            .feature-card::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
                transition: left 0.8s ease;
                border-radius: 16px;
            }

            .feature-card:hover::before {
                left: 100%;
            }

            .feature-card {
                transition: all 0.3s ease;
                height: 100%;
                background: rgba(255, 255, 255, 0.2) !important;
                backdrop-filter: blur(15px);
                -webkit-backdrop-filter: blur(15px);
                border-radius: 16px;
                border: 1px solid rgba(255, 255, 255, 0.25) !important;
                box-shadow:
                    0 8px 32px rgba(0, 0, 0, 0.1),
                    inset 0 1px 0 rgba(255, 255, 255, 0.4) !important;
                position: relative;
                overflow: hidden;
            }

            [data-theme="dark"] .feature-card {
                background: rgba(0, 0, 0, 0.35) !important;
                border: 1px solid rgba(255, 255, 255, 0.15) !important;
                box-shadow:
                    0 8px 32px rgba(0, 0, 0, 0.3),
                    inset 0 1px 0 rgba(255, 255, 255, 0.15) !important;
            }

            .feature-card:hover {
                transform: translateY(-8px) scale(1.02);
                box-shadow:
                    0 12px 40px rgba(0, 0, 0, 0.15),
                    inset 0 1px 0 rgba(255, 255, 255, 0.5) !important;
            }

            [data-theme="dark"] .feature-card:hover {
                box-shadow:
                    0 12px 40px rgba(0, 0, 0, 0.4),
                    inset 0 1px 0 rgba(255, 255, 255, 0.2) !important;
            }

            .feature-cards-carousel {
                display: flex;
                transition: transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
                width: 100%;
                height: auto;
                min-height: 300px;
                overflow: hidden;
                position: relative;
                transform: translateX(0%); /* Start with first card visible */
                margin-top: 1rem;
            }

            .feature-card-slide {
                min-width: 100%;
                flex-shrink: 0;
                position: relative;
                display: flex;
                justify-content: center;
                align-items: flex-start;
                padding: 0 1rem;
                box-sizing: border-box;
            }

            /* Hide all feature cards except the current one */
            .feature-card-slide:not(:first-child) {
                display: none;
            }

            .feature-card-slide .library-card {
                width: 100%;
                max-width: 600px;
                margin: 0 auto;
            }

            .progress-bar {
                height: 8px;
                background: rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(10px);
                border-radius: 10px;
                overflow: hidden;
                margin-bottom: 2rem;
                border: 1px solid rgba(255, 255, 255, 0.2);
            }

            [data-theme="dark"] .progress-bar {
                background: rgba(0, 0, 0, 0.3);
                border: 1px solid rgba(255, 255, 255, 0.1);
            }

            .progress-fill {
                height: 100%;
                background: linear-gradient(90deg, #3273dc, #23d160, #ff6b6b);
                background-size: 200% 100%;
                animation: gradientShift 3s ease infinite;
                transition: width 0.5s ease;
                border-radius: 10px;
            }

            @keyframes gradientShift {
                0% {
                    background-position: 0% 50%;
                }
                50% {
                    background-position: 100% 50%;
                }
                100% {
                    background-position: 0% 50%;
                }
            }

            .buttons.has-addons .button {
                border-radius: 0;
                background: rgba(255, 255, 255, 0.25);
                backdrop-filter: blur(15px);
                -webkit-backdrop-filter: blur(15px);
                color: #333;
                border: 1px solid rgba(255, 255, 255, 0.3);
                box-shadow:
                    0 4px 16px rgba(0, 0, 0, 0.1),
                    inset 0 1px 0 rgba(255, 255, 255, 0.4);
                transition: all 0.3s ease;
                position: relative;
                overflow: hidden;
            }

            [data-theme="dark"] .buttons.has-addons .button {
                background: rgba(0, 0, 0, 0.35);
                border: 1px solid rgba(255, 255, 255, 0.15);
                box-shadow:
                    0 4px 16px rgba(0, 0, 0, 0.3),
                    inset 0 1px 0 rgba(255, 255, 255, 0.15);
            }

            /* Active/Selected state */
            .buttons.has-addons .button.is-primary {
                background: rgba(255, 255, 255, 0.5) !important;
                border: 2px solid rgba(255, 255, 255, 0.6) !important;
                box-shadow:
                    0 8px 24px rgba(0, 0, 0, 0.2),
                    inset 0 1px 0 rgba(255, 255, 255, 0.6) !important;
                transform: scale(1.05);
            }

            [data-theme="dark"] .buttons.has-addons .button.is-primary {
                background: rgba(0, 0, 0, 0.6) !important;
                border: 2px solid rgba(255, 255, 255, 0.3) !important;
                box-shadow:
                    0 8px 24px rgba(0, 0, 0, 0.5),
                    inset 0 1px 0 rgba(255, 255, 255, 0.3) !important;
                transform: scale(1.05);
            }

            /* Completed state */
            .buttons.has-addons .button.is-success {
                background: rgba(35, 209, 96, 0.25) !important;
                border: 1px solid rgba(35, 209, 96, 0.4) !important;
                box-shadow:
                    0 6px 20px rgba(35, 209, 96, 0.15),
                    inset 0 1px 0 rgba(255, 255, 255, 0.5) !important;
            }

            [data-theme="dark"] .buttons.has-addons .button.is-success {
                background: rgba(35, 209, 96, 0.35) !important;
                border: 1px solid rgba(35, 209, 96, 0.2) !important;
                box-shadow:
                    0 6px 20px rgba(35, 209, 96, 0.4),
                    inset 0 1px 0 rgba(255, 255, 255, 0.2) !important;
            }

            /* Disabled state */
            .buttons.has-addons .button:disabled,
            .buttons.has-addons .button[disabled] {
                background: rgba(255, 255, 255, 0.25) !important;
                backdrop-filter: blur(15px) !important;
                color: #333 !important;
                border: 1px solid rgba(255, 255, 255, 0.3) !important;
                opacity: 1 !important;
                box-shadow:
                    0 4px 16px rgba(0, 0, 0, 0.1),
                    inset 0 1px 0 rgba(255, 255, 255, 0.4) !important;
            }

            [data-theme="dark"] .buttons.has-addons .button:disabled,
            [data-theme="dark"] .buttons.has-addons .button[disabled] {
                background: rgba(0, 0, 0, 0.35) !important;
                color: #fff !important;
                border: 1px solid rgba(255, 255, 255, 0.15) !important;
                box-shadow:
                    0 4px 16px rgba(0, 0, 0, 0.3),
                    inset 0 1px 0 rgba(255, 255, 255, 0.15) !important;
            }

            /* Shimmer effect for all buttons */
            .buttons.has-addons .button::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent);
                transition: left 0.8s ease;
                border-radius: 4px 0 0 4px;
            }

            .buttons.has-addons .button:hover::before {
                left: 100%;
            }

            [data-theme="dark"] .buttons.has-addons .button {
                background: rgba(0, 0, 0, 0.8);
                color: #fff;
                border: 1px solid rgba(255, 255, 255, 0.2);
            }

            .buttons.has-addons .button:first-child {
                border-radius: 12px 0 0 12px;
            }

            .buttons.has-addons .button:last-child {
                border-radius: 0 12px 12px 0;
            }

            .buttons.has-addons .button.is-primary {
                background: linear-gradient(135deg, #3273dc, #2563eb);
                border-color: #3273dc;
                color: white;
                box-shadow: 0 4px 12px rgba(50, 115, 220, 0.3);
            }

            .buttons.has-addons .button.is-success {
                background: linear-gradient(135deg, #23d160, #16a34a);
                border-color: #23d160;
                color: white;
                box-shadow: 0 4px 12px rgba(35, 209, 96, 0.3);
            }

            .glass-input {
                background: rgba(255, 255, 255, 0.2);
                backdrop-filter: blur(15px);
                border: 1px solid rgba(255, 255, 255, 0.25);
                color: #333;
                border-radius: 12px;
                transition: all 0.3s ease;
                box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3);
            }

            [data-theme="dark"] .glass-input {
                background: rgba(0, 0, 0, 0.35);
                border: 1px solid rgba(255, 255, 255, 0.15);
                color: #fff;
                box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.15);
            }

            .glass-input:focus {
                background: rgba(255, 255, 255, 0.25);
                border-color: #3273dc;
                box-shadow:
                    0 0 0 3px rgba(50, 115, 220, 0.2),
                    inset 0 1px 0 rgba(255, 255, 255, 0.4);
            }

            [data-theme="dark"] .glass-input:focus {
                background: rgba(0, 0, 0, 0.4);
                box-shadow:
                    0 0 0 3px rgba(50, 115, 220, 0.2),
                    inset 0 1px 0 rgba(255, 255, 255, 0.2);
            }

            .glass-select {
                background: rgba(255, 255, 255, 0.2);
                backdrop-filter: blur(15px);
                border: 1px solid rgba(255, 255, 255, 0.25);
                color: #333;
                border-radius: 12px;
                box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3);
            }

            [data-theme="dark"] .glass-select {
                background: rgba(0, 0, 0, 0.35);
                border: 1px solid rgba(255, 255, 255, 0.15);
                color: #fff;
                box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.15);
            }

            .notification {
                border-radius: 16px;
                backdrop-filter: blur(15px);
                border: 1px solid rgba(255, 255, 255, 0.25);
                box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3);
            }

            .notification.is-info {
                background: rgba(50, 115, 220, 0.2);
                color: #3273dc;
                border-color: rgba(50, 115, 220, 0.3);
            }

            .notification.is-success {
                background: rgba(35, 209, 96, 0.2);
                color: #23d160;
                border-color: rgba(35, 209, 96, 0.3);
            }

            .notification.is-danger {
                background: rgba(255, 107, 107, 0.2);
                color: #ff6b6b;
                border-color: rgba(255, 107, 107, 0.3);
            }

            [data-theme="dark"] .notification {
                color: #fff;
                box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.15);
            }

            .hidden {
                display: none !important;
            }

            [x-cloak] {
                display: none !important;
            }

            .loader {
                border: 4px solid rgba(255, 255, 255, 0.1);
                border-top: 4px solid #3273dc;
                border-radius: 50%;
                width: 40px;
                height: 40px;
                animation: spin 1s linear infinite;
                margin: 0 auto;
            }

            @keyframes spin {
                0% {
                    transform: rotate(0deg);
                }
                100% {
                    transform: rotate(360deg);
                }
            }

            .title, .subtitle, .label {
                color: inherit;
                text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            }

            .modal-card {
                background: rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(20px);
                border: 1px solid rgba(255, 255, 255, 0.2);
                border-radius: 20px;
                color: #333;
            }

            [data-theme="dark"] .modal-card {
                background: rgba(0, 0, 0, 0.3);
                border: 1px solid rgba(255, 255, 255, 0.1);
                color: #fff;
            }

            .modal-card-head {
                background: transparent;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }

            .modal-card-title {
                color: inherit;
            }

            .help {
                color: inherit;
                opacity: 0.8;
            }

            /* Override default box and card styles */
            .box:not(.glass-box) {
                background: transparent;
                border: none;
                box-shadow: none;
                color: inherit;
            }

            .card {
                background: transparent;
                border: none;
                box-shadow: none;
                color: inherit;
            }

            .card-content {
                background: transparent;
                color: inherit;
            }

            /* Remove box shadow from step cards during transitions */
            .step-content .glass-box {
                box-shadow: none !important;
            }

            .step-content.slide-out-left .glass-box,
            .step-content.slide-out-right .glass-box,
            .step-content.slide-in-right .glass-box,
            .step-content.slide-in-left .glass-box {
                box-shadow: none !important;
            }

            /* Apply glass styles to all buttons */
            .button {
                background: rgba(255, 255, 255, 0.25) !important;
                backdrop-filter: blur(15px);
                -webkit-backdrop-filter: blur(15px);
                color: #333 !important;
                border: 1px solid rgba(255, 255, 255, 0.3) !important;
                box-shadow:
                    0 4px 16px rgba(0, 0, 0, 0.1),
                    inset 0 1px 0 rgba(255, 255, 255, 0.4) !important;
                transition: all 0.3s ease;
                position: relative;
                overflow: hidden;
                border-radius: 12px;
            }

            [data-theme="dark"] .button {
                background: rgba(0, 0, 0, 0.35) !important;
                border: 1px solid rgba(255, 255, 255, 0.15) !important;
                color: #fff !important;
                box-shadow:
                    0 4px 16px rgba(0, 0, 0, 0.3),
                    inset 0 1px 0 rgba(255, 255, 255, 0.15) !important;
            }

            /* Primary button state */
            .button.is-primary {
                background: rgba(255, 255, 255, 0.5) !important;
                border: 2px solid rgba(255, 255, 255, 0.6) !important;
                box-shadow:
                    0 8px 24px rgba(0, 0, 0, 0.2),
                    inset 0 1px 0 rgba(255, 255, 255, 0.6) !important;
                transform: scale(1.05);
            }

            [data-theme="dark"] .button.is-primary {
                background: rgba(0, 0, 0, 0.6) !important;
                border: 2px solid rgba(255, 255, 255, 0.3) !important;
                box-shadow:
                    0 8px 24px rgba(0, 0, 0, 0.5),
                    inset 0 1px 0 rgba(255, 255, 255, 0.3) !important;
                transform: scale(1.05);
            }

            /* Button hover effects */
            .button:hover {
                background: rgba(255, 255, 255, 0.35) !important;
                box-shadow:
                    0 6px 20px rgba(0, 0, 0, 0.15),
                    inset 0 1px 0 rgba(255, 255, 255, 0.5) !important;
                transform: translateY(-2px);
            }

            [data-theme="dark"] .button:hover {
                background: rgba(0, 0, 0, 0.45) !important;
                box-shadow:
                    0 6px 20px rgba(0, 0, 0, 0.4),
                    inset 0 1px 0 rgba(255, 255, 255, 0.2) !important;
            }

            /* Button shimmer effect */
            .button::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent);
                transition: left 0.8s ease;
                border-radius: 12px;
            }

            .button:hover::before {
                left: 100%;
            }

            /* Fix icon positioning in buttons */
            .button .icon {
                margin-right: 0.5rem;
                margin-left: 0;
                display: inline-flex;
                align-items: center;
                justify-content: center;
                flex-shrink: 0;
            }

            .button .icon:last-child {
                margin-right: 0;
                margin-left: 0.5rem;
            }

            /* Ensure proper spacing for buttons with icons */
            .button {
                display: inline-flex;
                align-items: center;
                justify-content: center;
                gap: 0.5rem;
            }

            /* Apply glass styles to inputs */
            .input, .select select {
                background: rgba(255, 255, 255, 0.2);
                backdrop-filter: blur(15px);
                border: 1px solid rgba(255, 255, 255, 0.25);
                color: inherit;
                border-radius: 12px;
                box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3);
            }

            [data-theme="dark"] .input, [data-theme="dark"] .select select {
                background: rgba(0, 0, 0, 0.35);
                border: 1px solid rgba(255, 255, 255, 0.15);
                color: #fff;
                box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.15);
            }

            .input:focus, .select select:focus {
                background: rgba(255, 255, 255, 0.25);
                border-color: #3273dc;
                box-shadow:
                    0 0 0 3px rgba(50, 115, 220, 0.2),
                    inset 0 1px 0 rgba(255, 255, 255, 0.4);
            }

            [data-theme="dark"] .input:focus, [data-theme="dark"] .select select:focus {
                background: rgba(0, 0, 0, 0.4);
                box-shadow:
                    0 0 0 3px rgba(50, 115, 220, 0.2),
                    inset 0 1px 0 rgba(255, 255, 255, 0.2);
            }

            /* Container for step content */
            .steps-container {
                position: relative;
                width: 100%;
                overflow: hidden;
            }

            /* Step content base styles - completely rewritten */
            .step-content {
                display: none;
                width: 100%;
                opacity: 0;
                transform: translateX(100%);
                transition: all 0.4s ease-in-out;
            }

            .step-content.active {
                display: block;
                opacity: 1;
                transform: translateX(0);
            }

            .step-content.slide-out-left {
                transform: translateX(-100%);
                opacity: 0;
            }

            .step-content.slide-out-right {
                transform: translateX(100%);
                opacity: 0;
            }

            .step-content.slide-in-right {
                transform: translateX(100%);
                opacity: 0;
            }

            .step-content.slide-in-left {
                transform: translateX(-100%);
                opacity: 0;
            }

            /* Ensure first step is visible on load */
            .step-content:nth-child(1) {
                display: block;
                opacity: 1;
                transform: translateX(0);
            }

            /* Slide animation for Get Started button */
            @keyframes slideIn {
                0% {
                    transform: translateX(-20px);
                    opacity: 0;
                }
                100% {
                    transform: translateX(0);
                    opacity: 1;
                }
            }

            @keyframes pulse {
                0%, 100% {
                    transform: scale(1);
                }
                50% {
                    transform: scale(1.05);
                }
            }

            .slide-button {
                background: rgba(255, 255, 255, 0.25) !important;
                backdrop-filter: blur(15px);
                -webkit-backdrop-filter: blur(15px);
                border: 1px solid rgba(255, 255, 255, 0.3) !important;
                box-shadow:
                    0 8px 32px rgba(0, 0, 0, 0.1),
                    inset 0 1px 0 rgba(255, 255, 255, 0.4) !important;
                animation: slideIn 0.8s ease-out;
                position: relative;
                overflow: hidden;
                transition: all 0.3s ease;
            }

            .slide-button:hover {
                background: rgba(255, 255, 255, 0.35) !important;
                box-shadow:
                    0 12px 40px rgba(0, 0, 0, 0.15),
                    inset 0 1px 0 rgba(255, 255, 255, 0.5) !important;
                transform: translateY(-2px);
            }

            .slide-button:active {
                transform: translateY(0) scale(0.98);
            }

            [data-theme="dark"] .slide-button {
                background: rgba(0, 0, 0, 0.35) !important;
                border: 1px solid rgba(255, 255, 255, 0.2) !important;
                box-shadow:
                    0 8px 32px rgba(0, 0, 0, 0.3),
                    inset 0 1px 0 rgba(255, 255, 255, 0.15) !important;
            }

            [data-theme="dark"] .slide-button:hover {
                background: rgba(0, 0, 0, 0.45) !important;
                box-shadow:
                    0 12px 40px rgba(0, 0, 0, 0.4),
                    inset 0 1px 0 rgba(255, 255, 255, 0.2) !important;
            }

            .slide-button::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
                transition: left 0.8s ease;
                border-radius: 4px 0 0 4px;
            }

            .slide-button:hover::before {
                left: 100%;
            }

            /* Welcome card animation */
            .welcome-card {
                animation: slideIn 0.8s ease-out;
            }

            /* Library card animation - inherit all glass-box properties */
            .library-card {
                /* Inherit all glass-box properties */
                background: rgba(255, 255, 255, 0.25) !important;
                backdrop-filter: blur(8px);
                -webkit-backdrop-filter: blur(8px);
                border-radius: 20px;
                border: 1px solid rgba(255, 255, 255, 0.3) !important;
                box-shadow:
                    0 8px 32px rgba(0, 0, 0, 0.1),
                    inset 0 1px 0 rgba(255, 255, 255, 0.4) !important;
                color: #333 !important;
                position: relative;
                overflow: hidden;

                /* Animation properties */
                transform: translateX(-20px);
                opacity: 0;
            }

            .library-card.entrance-animation {
                animation: slideIn 0.8s ease-out forwards;
            }

            /* Glass box entrance animation for steps */
            .glass-box.entrance-animation {
                animation: slideIn 0.8s ease-out forwards;
            }

            /* Ensure library card starts with initial state when hidden */
            .step-content:not(.active) .library-card,
            .step-content:not(.active) .glass-box {
                opacity: 0;
                transition: opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            }

            /* Ensure library cards and all their content are visible in active step */
            .step-content.active .library-card,
            .step-content.active .library-card *,
            .step-content.active .glass-box,
            .step-content.active .glass-box * {
                opacity: 1 !important;
                visibility: visible !important;
                transform: none !important;
            }



            /* Dark theme for library card */
            [data-theme="dark"] .library-card {
                background: rgba(0, 0, 0, 0.4) !important;
                border: 1px solid rgba(255, 255, 255, 0.2) !important;
                color: #fff !important;
                box-shadow:
                    0 8px 32px rgba(0, 0, 0, 0.3),
                    inset 0 1px 0 rgba(255, 255, 255, 0.2) !important;
            }

            /* Hover effect for library card */
            .library-card::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent);
                transition: left 0.8s ease;
            }

            .library-card:hover::before {
                left: 100%;
            }

            /* Force welcome text to be dark */
            .has-text-centered .title,
            .has-text-centered .subtitle {
                color: #1a1a1a !important;
                text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
            }

            /* Force card titles to be dark */
            .title.is-6,
            .title.is-4 {
                color: #1a1a1a !important;
                text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
            }

            /* Force checkbox labels to be dark */
            .checkbox {
                color: #1a1a1a !important;
                text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
            }

            .checkbox strong {
                color: #1a1a1a !important;
                text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
            }

            /* Dark theme checkbox labels */
            [data-theme="dark"] .checkbox,
            [data-theme="dark"] .checkbox strong {
                color: #fff !important;
                text-shadow: 0 1px 2px rgba(0, 0, 0, 0.8);
            }

            /* Glass Loading Modal Styles */
            .glass-loading-modal {
                background: rgba(255, 255, 255, 0.35) !important;
                backdrop-filter: blur(20px);
                -webkit-backdrop-filter: blur(20px);
                border: 1px solid rgba(255, 255, 255, 0.4) !important;
                border-radius: 20px;
                box-shadow:
                    0 8px 32px rgba(0, 0, 0, 0.08),
                    inset 0 1px 0 rgba(255, 255, 255, 0.6) !important;
                color: #333 !important;
                max-width: 400px;
                margin: 0 auto;
                position: relative;
                overflow: hidden;
                animation: modalSlideIn 0.4s ease-out;
            }

            [data-theme="dark"] .glass-loading-modal {
                background: rgba(255, 255, 255, 0.15) !important;
                border: 1px solid rgba(255, 255, 255, 0.25) !important;
                color: #fff !important;
                box-shadow:
                    0 8px 32px rgba(0, 0, 0, 0.2),
                    inset 0 1px 0 rgba(255, 255, 255, 0.3) !important;
            }

            .glass-loading-modal::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
                transition: left 0.8s ease;
                border-radius: 20px;
            }

            .glass-loading-modal:hover::before {
                left: 100%;
            }

            .glass-loading-header {
                background: rgba(255, 255, 255, 0.15);
                border-bottom: 1px solid rgba(255, 255, 255, 0.3);
                backdrop-filter: blur(10px);
                padding: 1.5rem;
            }

            [data-theme="dark"] .glass-loading-header {
                background: rgba(255, 255, 255, 0.05);
                border-bottom: 1px solid rgba(255, 255, 255, 0.15);
            }

            .glass-loading-body {
                background: transparent;
                padding: 2rem 1.5rem;
            }

            /* Glass Loader Animation */
            .glass-loader {
                position: relative;
                width: 80px;
                height: 80px;
                margin: 0 auto;
            }

            .loader-ring {
                position: absolute;
                width: 100%;
                height: 100%;
                border: 3px solid transparent;
                border-radius: 50%;
                animation: loaderSpin 1.5s cubic-bezier(0.5, 0, 0.5, 1) infinite;
            }

            .loader-ring:nth-child(1) {
                border-top-color: rgba(50, 115, 220, 0.8);
                animation-delay: -0.45s;
            }

            .loader-ring:nth-child(2) {
                border-right-color: rgba(35, 209, 96, 0.8);
                animation-delay: -0.3s;
            }

            .loader-ring:nth-child(3) {
                border-bottom-color: rgba(255, 107, 107, 0.8);
                animation-delay: -0.15s;
            }

            .loader-ring:nth-child(4) {
                border-left-color: rgba(255, 193, 7, 0.8);
            }

            @keyframes loaderSpin {
                0% {
                    transform: rotate(0deg);
                }
                100% {
                    transform: rotate(360deg);
                }
            }

            @keyframes modalSlideIn {
                0% {
                    opacity: 0;
                    transform: translateY(-20px) scale(0.95);
                }
                100% {
                    opacity: 1;
                    transform: translateY(0) scale(1);
                }
            }

            .loading-message {
                font-size: 1.1rem;
                font-weight: 500;
                margin-top: 1.5rem;
                opacity: 0.9;
                animation: messagePulse 2s ease-in-out infinite;
            }

            @keyframes messagePulse {
                0%, 100% {
                    opacity: 0.9;
                }
                50% {
                    opacity: 0.6;
                }
            }

            .loading-hint {
                display: inline-flex;
                align-items: center;
                gap: 0.5rem;
                margin-top: 1rem;
                padding: 0.75rem 1rem;
                background: rgba(255, 255, 255, 0.2);
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.3);
                border-radius: 12px;
                font-size: 0.9rem;
                color: #666;
                animation: hintSlideIn 0.5s ease-out;
            }

            [data-theme="dark"] .loading-hint {
                background: rgba(0, 0, 0, 0.3);
                border: 1px solid rgba(255, 255, 255, 0.2);
                color: #ccc;
            }

            @keyframes hintSlideIn {
                0% {
                    opacity: 0;
                    transform: translateY(10px);
                }
                100% {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            /* Modal background - lighter for liquid glass effect */
            .modal-background {
                background-color: rgba(0, 0, 0, 0.2) !important;
            }

            [data-theme="dark"] .modal-background {
                background-color: rgba(0, 0, 0, 0.3) !important;
            }

            /* Update existing modal-card styles to be more specific */
            .modal-card:not(.glass-loading-modal) {
                background: rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(20px);
                border: 1px solid rgba(255, 255, 255, 0.2);
                border-radius: 20px;
                color: #333;
            }

            [data-theme="dark"] .modal-card:not(.glass-loading-modal) {
                background: rgba(0, 0, 0, 0.3);
                border: 1px solid rgba(255, 255, 255, 0.1);
                color: #fff;
            }


        </style>
    </head>
    <body class="has-background-light">
        <div class="setup-container">
            <!-- Header -->
            <div class="has-text-centered mb-6">
                <h1 class="title is-2 has-text-white">Welcome to JMedia</h1>
                <p class="subtitle is-5 has-text-white">Your personal music and video library manager</p>
            </div>

            <!-- Progress Bar -->
            <div class="progress-bar">
                <div class="progress-fill" :style="`width: ${($store.setup.currentStep / totalSteps) * 100}%`"></div>
            </div>

            <!-- Step Indicators -->
            <div class="columns is-mobile is-centered mb-6">
                <div class="column is-narrow">
                    <div class="buttons has-addons">
                        <button class="button" :class="{ 'is-primary': $store.setup.currentStep === 1, 'is-success': $store.setup.currentStep > 1 }" disabled>
                            <span class="is-hidden-mobile">Welcome</span>
                        </button>
                        <button class="button" :class="{ 'is-primary': $store.setup.currentStep === 2, 'is-success': $store.setup.currentStep > 2 }" disabled>
                            <span class="is-hidden-mobile">Library</span>
                        </button>
                        <button class="button" :class="{ 'is-primary': $store.setup.currentStep === 3, 'is-success': $store.setup.currentStep > 3 }" disabled>
                            <span class="is-hidden-mobile">Features</span>
                        </button>
                        <button class="button" :class="{ 'is-primary': $store.setup.currentStep === 4 }" disabled>
                            <span class="is-hidden-mobile">Complete</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Steps Container -->
            <div class="steps-container">
                <!-- Step 1: Welcome -->
                <div class="step-content" :class="{ 'active': $store.setup.currentStep === 1 }">
                    <div class="box glass-box welcome-card">
                        <h2 class="title is-4 mb-4">Welcome to JMedia!</h2>

                        <div class="content">
                            <p class="mb-4">
                                JMedia is a free, open-source music and video library manager that helps you organize, 
                                manage, and enjoy your personal media collection.
                            </p>

                            <div class="notification is-info">
                                <strong>Important Notice:</strong>
                                <ul class="mt-2">
                                    <li>JMedia is provided as free, open-source software</li>
                                    <li>No warranties or guarantees are provided</li>
                                    <li>Use at your own discretion</li>
                                    <li>Always backup your media files</li>
                                </ul>
                            </div>

                            <div class="columns is-multiline mt-5">
                                <div class="column is-half">
                                    <div class="card feature-card">
                                        <div class="card-content">
                                            <div class="media">
                                                <div class="media-left">
                                                    <span class="icon is-large has-text-primary">
                                                        <i class="pi pi-music" style="font-size: 2rem;"></i>
                                                    </span>
                                                </div>
                                                <div class="media-content">
                                                    <h3 class="title is-6">Music Management</h3>
                                                    <p class="subtitle is-7">Organize and play your music library</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="column is-half">
                                    <div class="card feature-card">
                                        <div class="card-content">
                                            <div class="media">
                                                <div class="media-left">
                                                    <span class="icon is-large has-text-info">
                                                        <i class="pi pi-video" style="font-size: 2rem;"></i>
                                                    </span>
                                                </div>
                                                <div class="media-content">
                                                    <h3 class="title is-6">Video Management</h3>
                                                    <p class="subtitle is-7">Manage TV shows and movies</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="column is-half">
                                    <div class="card feature-card">
                                        <div class="card-content">
                                            <div class="media">
                                                <div class="media-left">
                                                    <span class="icon is-large has-text-success">
                                                        <i class="pi pi-download" style="font-size: 2rem;"></i>
                                                    </span>
                                                </div>
                                                <div class="media-content">
                                                    <h3 class="title is-6">Import Features</h3>
                                                    <p class="subtitle is-7">Download and organize media</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="column is-half">
                                    <div class="card feature-card">
                                        <div class="card-content">
                                            <div class="media">
                                                <div class="media-left">
                                                    <span class="icon is-large has-text-warning">
                                                        <i class="pi pi-shield" style="font-size: 2rem;"></i>
                                                    </span>
                                                </div>
                                                <div class="media-content">
                                                    <h3 class="title is-6">Privacy First</h3>
                                                    <p class="subtitle is-7">All your data is stored in YOUR computer</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="field is-grouped is-grouped-centered mt-6">
                                <p class="control">
                                    <button class="button is-large is-primary slide-button" @click="$store.setup.nextStep()">
                                        Get Started
                                    </button>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 2: Library Configuration -->
                <div class="step-content" :class="{ 'active': $store.setup.currentStep === 2 }">
                    <div class="box glass-box library-card">
                        <h2 class="title is-4 mb-4">Library Configuration</h2>

                        <div class="content">
                            <p class="mb-4">Select the default folders where your media files will be stored:</p>

                            <!-- Music Library Folder -->
                            <div class="field">
                                <label class="label is-large">Music Library Folder</label>
                                <div class="field has-addons">
                                    <div class="control is-expanded">
                                        <input 
                                            type="text" 
                                            class="input is-large" 
                                            placeholder="Select your music library folder..."
                                            x-model="$store.setup.musicLibraryPath"
                                            readonly>
                                    </div>
                                    <div class="control">
                                        <button class="button is-large is-primary" @click="$store.setup.browseFolder('music')">
                                            <span class="icon">
                                                <i class="pi pi-folder-open"></i>
                                            </span>
                                            Browse
                                        </button>
                                    </div>
                                </div>
                                <p class="help">This folder will contain your organized music collection</p>
                            </div>

                            <!-- Video Library Folder -->
                            <div class="field">
                                <label class="label is-large">Video Library Folder</label>
                                <div class="field has-addons">
                                    <div class="control is-expanded">
                                        <input 
                                            type="text" 
                                            class="input is-large" 
                                            placeholder="Select your video library folder..."
                                            x-model="$store.setup.videoLibraryPath"
                                            readonly>
                                    </div>
                                    <div class="control">
                                        <button class="button is-large is-primary" @click="$store.setup.browseFolder('video')">
                                            <span class="icon">
                                                <i class="pi pi-folder-open"></i>
                                            </span>
                                            Browse
                                        </button>
                                    </div>
                                </div>
                                <p class="help">This folder will contain your TV shows and movies (optional)</p>
                            </div>

                            <!-- Service Mode Toggle -->
                            <div class="field">
                                <label class="label is-large">Service Mode</label>
                                <div class="control">
                                    <label class="checkbox is-large">
                                        <input 
                                            type="checkbox" 
                                            x-model="$store.setup.runAsService">
                                        <strong>Run as Service (Don't close on disconnect)</strong>
                                    </label>
                                </div>
                                <p class="help">Keep JMedia running even when browser is closed. Access it anytime from this computer's IP address or http://localhost</p>
                            </div>
                        </div>
                    </div>

                    <div class="field is-grouped is-grouped-centered mt-6">
                        <p class="control">
                            <button class="button" @click="previousStep()">
                                <span class="icon">
                                    <i class="pi pi-arrow-left"></i>
                                </span>
                                Back
                            </button>
                        </p>
                        <p class="control">
                            <button class="button is-primary" @click="$store.setup.validateAndNext()">
                                Next
                                <span class="icon">
                                    <i class="pi pi-arrow-right"></i>
                                </span>
                            </button>
                        </p>
                    </div>
                </div>
                <!-- Step 3: Features Configuration -->
                <div class="step-content" :class="{ 'active': $store.setup.currentStep === 3 }">
                    <div class="box glass-box">
                        <h2 class="title is-4 mb-4">Features Configuration</h2>

                        <div class="feature-cards-carousel">
                            <!-- Import Installation Card -->
                            <div class="feature-card-slide">
                                <div class="box glass-box library-card">
                                    <h3 class="title is-5 mb-4">Import Installation</h3>

                                    <div class="notification is-warning is-light">
                                        <strong>Import features require additional installations.</strong>
                                        <p class="mb-3">The following components need to be installed to enable music import functionality:</p>
                                        <ul class="mb-4" id="missingComponentsList">
                                            <!-- Components will be dynamically added here -->
                                        </ul>
                                        <p class="is-size-7">Note: On Windows, Python and FFmpeg are installed via Chocolatey, then SpotDL and Whisper via pip (Python).</p>
                                        <div class="mt-3">
                                            <button class="button is-small is-info" @click="$store.setup.checkInstallationStatus()">
                                                <span class="icon">
                                                    <i class="pi pi-refresh"></i>
                                                </span>
                                                Refresh Status
                                            </button>
                                        </div>
                                    </div>

                                    <!-- Python Installation -->
                                    <div class="field mb-3">
                                        <div class="level is-mobile">
                                            <div class="level-left">
                                                <label class="label mb-0">Python</label>
                                            </div>
                                            <div class="level-right">
                                                <button id="installPythonBtn" class="button is-success is-rounded is-small" @click="$store.setup.installPython()">
                                                    <i class="pi pi-download mr-1"></i>
                                                    Install Python
                                                </button>
                                            </div>
                                        </div>
                                        <div class="mt-2" id="pythonProgressContainer" style="display: none;">
                                            <progress id="pythonInstallProgress" class="progress is-small is-info" value="0" max="100">0%</progress>
                                        </div>
                                        <p id="pythonStatus" class="help is-size-7 mt-2">Not installed</p>
                                    </div>

                                    <!-- FFmpeg Installation -->
                                    <div class="field mb-3">
                                        <div class="level is-mobile">
                                            <div class="level-left">
                                                <label class="label mb-0">FFmpeg</label>
                                            </div>
                                            <div class="level-right">
                                                <button id="installFfmpegBtn" class="button is-success is-rounded is-small" @click="$store.setup.installFfmpeg()">
                                                    <i class="pi pi-download mr-1"></i>
                                                    Install FFmpeg
                                                </button>
                                            </div>
                                        </div>
                                        <div class="mt-2" id="ffmpegProgressContainer" style="display: none;">
                                            <progress id="ffmpegInstallProgress" class="progress is-small is-info" value="0" max="100">0%</progress>
                                        </div>
                                        <p id="ffmpegStatus" class="help is-size-7 mt-2">Not installed</p>
                                    </div>

                                    <!-- SpotDL Installation -->
                                    <div class="field mb-3">
                                        <div class="level is-mobile">
                                            <div class="level-left">
                                                <label class="label mb-0">SpotDL</label>
                                            </div>
                                            <div class="level-right">
                                                <button id="installSpotdlBtn" class="button is-success is-rounded is-small" @click="$store.setup.installSpotdl()">
                                                    <i class="pi pi-download mr-1"></i>
                                                    Install SpotDL
                                                </button>
                                            </div>
                                        </div>
                                        <div class="mt-2" id="spotdlProgressContainer" style="display: none;">
                                            <progress id="spotdlInstallProgress" class="progress is-small is-info" value="0" max="100">0%</progress>
                                        </div>
                                        <p id="spotdlStatus" class="help is-size-7 mt-2">Not installed</p>
                                    </div>

                                    <!-- Whisper Installation -->
                                    <div class="field mb-3">
                                        <div class="level is-mobile">
                                            <div class="level-left">
                                                <label class="label mb-0">Whisper</label>
                                            </div>
                                            <div class="level-right">
                                                <button id="installWhisperBtn" class="button is-success is-rounded is-small" @click="$store.setup.installWhisper()">
                                                    <i class="pi pi-download mr-1"></i>
                                                    Install Whisper
                                                </button>
                                            </div>
                                        </div>
                                        <div class="mt-2" id="whisperProgressContainer" style="display: none;">
                                            <progress id="whisperInstallProgress" class="progress is-small is-info" value="0" max="100">0%</progress>
                                        </div>
                                        <p id="whisperStatus" class="help is-size-7 mt-2">Not installed</p>
                                    </div>

                                    <!-- Import Settings (shown only after SpotDL is installed) -->
                                    <div id="importSettingsSection" style="display: none;" class="mt-5">
                                        <hr class="my-4">
                                        <h4 class="title is-5 mb-4">Import Settings</h4>

                                        <div class="columns">
                                            <div class="column">
                                                <div class="field">
                                                    <label class="label">Output Format</label>
                                                    <div class="control">
                                                        <div class="select is-fullwidth">
                                                            <select id="outputFormat" name="outputFormat" x-model="$store.setup.outputFormat">
                                                                <option value="mp3">MP3</option>
                                                                <option value="flac">FLAC</option>
                                                                <option value="wav">WAV</option>
                                                                <option value="m4a">M4A</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <p class="help">Choose output format for downloaded files</p>
                                                </div>
                                            </div>
                                            <div class="column">
                                                <div class="field">
                                                    <label class="label">Download Threads</label>
                                                    <div class="control">
                                                        <input 
                                                            type="number" 
                                                            class="input" 
                                                            id="downloadThreads"
                                                            name="downloadThreads"
                                                            min="1" 
                                                            max="16"
                                                            x-model="$store.setup.downloadThreads">
                                                    </div>
                                                    <p class="help">Number of concurrent downloads (1-16)</p>
                                                </div>
                                            </div>
                                            <div class="column">
                                                <div class="field">
                                                    <label class="label">Search Threads</label>
                                                    <div class="control">
                                                        <input 
                                                            type="number" 
                                                            class="input" 
                                                            id="searchThreads"
                                                            name="searchThreads"
                                                            min="1" 
                                                            max="16"
                                                            x-model="$store.setup.searchThreads">
                                                    </div>
                                                    <p class="help">Number of concurrent searches (1-16)</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div> 
                                </div> 
                            </div> 
                        </div>

                        <div class="field is-grouped is-grouped-centered mt-6">
                            <p class="control">
                                <button class="button" @click="previousStep()">
                                    <span class="icon">
                                        <i class="pi pi-arrow-left"></i>
                                    </span>
                                    Back
                                </button>
                            </p>
                            <p class="control">
                                <button class="button is-primary" @click="nextStep()">
                                    Next
                                    <span class="icon">
                                        <i class="pi pi-arrow-right"></i>
                                    </span>
                                </button>
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Step 4: Complete -->
                <div class="step-content" :class="{ 'active': $store.setup.currentStep === 4 }">
                    <div class="box glass-box">
                        <h2 class="title is-4 mb-4">Setup Summary</h2>

                        <div class="content">
                            <p>Review your configuration before completing setup:</p>

                            <div class="columns is-multiline">
                                <!-- Library Paths -->
                                <div class="column is-half">
                                    <div class="notification is-info">
                                        <strong>Music Library</strong>
                                        <p x-text="$store.setup.musicLibraryPath || 'Not selected'"></p>
                                    </div>
                                </div>
                                <div class="column is-half" x-show="$store.setup.videoLibraryPath">
                                    <div class="notification is-info">
                                        <strong>Video Library</strong>
                                        <p x-text="$store.setup.videoLibraryPath"></p>
                                    </div>
                                </div>

                                <!-- Import Features -->
                                <div class="column is-half" x-show="$store.setup.outputFormat">
                                    <div class="notification is-success">
                                        <strong>Import Features</strong>
                                        <p>Output Format: <span x-text="$store.setup.outputFormat?.toUpperCase()"></span></p>
                                        <p>Download Threads: <span x-text="$store.setup.downloadThreads"></span></p>
                                        <p>Search Threads: <span x-text="$store.setup.searchThreads"></span></p>
                                    </div>
                                </div>

                                <!-- Music Organization -->
                                <div class="column is-half" x-show="$store.setup.organizeLibrary">
                                    <div class="notification is-success">
                                        <strong>Music Organization</strong>
                                        <p>Auto-organize library is enabled</p>
                                    </div>
                                </div>

                                <!-- Video Library -->
                                <div class="column is-half" x-show="$store.setup.videoLibrary">
                                    <div class="notification is-warning">
                                        <strong>Video Library</strong>
                                        <p>Video management is enabled</p>
                                    </div>
                                </div>

                                <!-- Privacy First -->
                                <div class="column is-half" x-show="$store.setup.privateMode">
                                    <div class="notification is-danger">
                                        <strong>Privacy First</strong>
                                        <p>All your data is stored in YOUR computer</p>
                                    </div>
                                </div>

                                <!-- Service Mode -->
                                <div class="column is-half" x-show="$store.setup.runAsService">
                                    <div class="notification is-info">
                                        <strong>Service Mode</strong>
                                        <p>JMedia will run as a service and stay accessible from this computer's IP address after browser closes</p>
                                    </div>
                                </div>
                            </div>

                            <div class="has-text-centered mt-6">
                                <div class="mb-5">
                                    <span class="icon is-large has-text-success">
                                        <i class="pi pi-check-circle" style="font-size: 4rem;"></i>
                                    </span>
                                </div>

                                <h3 class="title is-4 mb-4">Ready to Launch JMedia!</h3>
                                <p class="mb-4">
                                    Your JMedia library is now configured and ready to use.
                                </p>
                            </div>
                        </div>

                        <div class="field is-grouped is-grouped-centered mt-6">
                            <p class="control">
                                <button class="button" @click="previousStep()">
                                    <span class="icon">
                                        <i class="pi pi-arrow-left"></i>
                                    </span>
                                    Back
                                </button>
                            </p>
                            <p class="control">
                                <button class="button is-large is-primary" @click="$store.setup.completeSetup()">
                                    <span class="icon">
                                        <i class="pi pi-rocket"></i>
                                    </span>
                                    Launch JMedia
                                </button>
                            </p>
                        </div>
                    </div>
                </div> 
            </div> <!-- End Steps Container -->

            <!-- Loading Overlay -->
            <div class="modal is-active" x-show="$store.setup.loading" x-cloak>
                <div class="modal-background"></div>
                <div class="modal-card glass-loading-modal">
                    <header class="modal-card-head glass-loading-header">
                        <p class="modal-card-title" x-text="$store.setup.loadingMessage || 'Setting up JMedia...'">Setting up JMedia...</p>
                    </header>
                    <section class="modal-card-body glass-loading-body">
                        <div class="has-text-centered">
                            <div class="glass-loader">
                                <div class="loader-ring"></div>
                                <div class="loader-ring"></div>
                                <div class="loader-ring"></div>
                                <div class="loader-ring"></div>
                            </div>
                            <p class="mt-4 loading-message" x-text="$store.setup.loadingMessage"></p>
                            <div class="loading-hint" x-show="$store.setup.loadingMessage && $store.setup.loadingMessage.includes('folder')">
                                <span class="icon">
                                    <i class="pi pi-info-circle"></i>
                                </span>
                                A folder selection dialog will open. If you don't see it, check behind your browser window.
                            </div>
                        </div>
                    </section>
                </div>
            </div>



            <script>
                // Initialize global profile ID (use default profile 1 for setup)
                window.globalActiveProfileId = 1;

                // Load settings before Alpine initializes to prevent hiding
                (async function loadInitialSettings() {
                    try {
                        const response = await fetch(`/api/settings/${globalActiveProfileId}`);
                        if (response.ok) {
                            const result = await response.json();
                            if (result.data) {
                                // Set initial values to prevent content hiding
                                // Always show import features option, default to enabled if settings exist
                                window.initialSetupData = {
                                    installImportFeatures: result.data.outputFormat !== undefined ? true : false,
                                    outputFormat: result.data.outputFormat || 'mp3',
                                    downloadThreads: result.data.downloadThreads || 4,
                                    searchThreads: result.data.searchThreads || 4
                                };
                            }
                        }
                    } catch (error) {
                        console.error('Error loading initial settings:', error);
                        window.initialSetupData = {
                            installImportFeatures: false,
                            outputFormat: 'mp3',
                            downloadThreads: 4,
                            searchThreads: 4
                        };
                    }
                })();

                // Add slide animation function using Alpine.js
                function nextStep() {
                    // Move to next step - Alpine.js will handle the transitions
                    window.Alpine.store('setup').nextStep();
                }

                function previousStep() {
                    // Move to previous step - Alpine.js will handle the transitions
                    window.Alpine.store('setup').previousStep();
                }

                function completeSetup() {
                    // Complete setup - Alpine.js will handle the process
                    window.Alpine.store('setup').completeSetup();
                }
            </script>
            <script src="/js/setup.js"></script>
    </body>
</html>